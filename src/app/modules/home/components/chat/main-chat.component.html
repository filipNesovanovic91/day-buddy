<div class="main-chat-container">
  <div class="converzation-wrapper">
    <div
      *ngFor="let message of messages$ | async"
      class="conversation-container"
    >
      <!-- Display Messages -->
      <div class="message" *ngFor="let msg of message.messages">
        <p>
          <span
            [ngClass]="message.ai ? 'robot-head-icon' : ''"
            class="chat-icon"
          ></span>
          {{ message.ai ? "DayBuddy" : "You" }}
        </p>
        <p>{{ msg }}</p>
      </div>

      <!-- Display Buttons -->
      <div
        class="buttons"
        *ngIf="message.buttons && message.buttons.length > 0"
      >
        <div *ngFor="let button of message.buttons; let i = index">
          <br />
          <button
            [disabled]="button.selected"
            (click)="disableButtonsAfterSelect(i, message.buttons, button.api)"
          >
            {{ button.name }}
          </button>
        </div>
      </div>
      <!-- Display Mentors -->
      <div
        class="mentors-container"
        *ngIf="message.mentors && message.mentors.length > 0"
      >
        <div
          *ngFor="let mentor of message.mentors; let i = index"
          class="single-mentor-container"
        >
          <div class="inner-container">
            <div class="profile-info" (click)="openModal(mentor)">
              <img
                src="{{ mentor.img }}"
                alt="{{ mentor.img }}"
                class="mentor-img"
              />
              <div class="mentor-data">
                <p class="profile-match">
                  {{ mentor.matchPercent }}% Match - View Mentor Profile
                </p>
                <p class="mentor-name">
                  {{ mentor.firstName }} {{ mentor.lastName }}
                </p>
                <p class="mentor-title">{{ mentor.jobTitle }}</p>
              </div>
            </div>
            <div class="action-buttons">
              <button>Message</button>
              <a>Schedule a meeting</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="prompt-input">
    <div class="suggestion-prompt-container">
      <ng-container *ngIf="disabledInputField">
        <div class="suggestion-prompt" (click)="sendMessageToAI()">
          Let me support you in finding the mentor who can best contribute to
          your growth.
        </div>
        <div class="suggestion-prompt">
          Find answers and insights in our Knowledge Base
        </div>
      </ng-container>
    </div>
    <div class="input-container">
      <input
        [disabled]="disabledInputField"
        [(ngModel)]="newMessage"
        type="text"
        placeholder="Message DayBuddy..."
      />
      <span class="send-icon" (click)="sendMessage()"> </span>
    </div>
  </div>
</div>

<div class="overlay" id="modal">
  <div class="modal">
    <div class="exit" (click)="exitModal()"></div>
    <div class="cover-image"></div>
    <div class="profile-page">
      <div class="inner-container">
        <div class="profile-container">
          <img
            src="{{ profileMentor?.img }}"
            alt="{{ profileMentor?.img }}"
            class="profile-picture"
          />
          <div class="profile-page-info">
            <p class="profile-name">
              {{ profileMentor?.firstName }} {{ profileMentor?.lastName }}
            </p>
            <p class="profile-job">{{ profileMentor?.jobTitle }}</p>
          </div>
        </div>
        <div class="buttons-container">
          <a>Schedule a meeting</a>
          <button>Message</button>
        </div>
      </div>
    </div>
  </div>
</div>
